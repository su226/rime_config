patch:
  # åå­—
  schema/name: æ‹¼éŸ³

  # å¼€å…³
  # ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ä¸­è‹±åˆ‡æ¢
  switches/@0/states: null
  # ä½¿ç”¨RIMEçš„ä¸­è‹±åˆ‡æ¢
  # switches/@0/states: [ä¸­, è‹±]
  switches/@1/states: [åŠ, å…¨]
  switches/@2/states: [ç¹, ç®€]
  switches/@3/states: [æ ‡, ï¼°]

  # è¯åº“
  translator/dictionary: luna_pinyin.su226

  speller/algebra/+:
    # æ¨¡ç³ŠéŸ³
    - erase/^xx$/                  # ç¬¬ä¸€è¡Œä¿ç•™
    - derive/^([zcs])h/$1/         # zh, ch, sh => z, c, s
    - derive/^([zcs])([^h])/$1h$2/ # z, c, s => zh, ch, sh
    - derive/^n/l/                 # n => l
    - derive/^l/n/                 # l => n
    - derive/([eio])n$/$1ng/       # en => eng, in => ing, on => ong
    - derive/([eio])ng$/$1n/       # eng => en, ing => in, ong => on

    # ç®€æ‹¼
    - abbrev/^([a-z]).+$/$1/             # é¦–å­—æ¯
    - abbrev/^([zcs]h).+$/$1/            # zh, ch, sh

  schema/dependencies:
    - emoji
    - easy_en
    - chaizi

  engine/translators/+:
    - table_translator@emoji_lookup
    - table_translator@easy_en
    # ä½¿ç”¨åŒæ–‡è¾“å…¥æ³•æ—¶æ‹†å­—åŠŸèƒ½éœ€è¦è§£é™¤ä¸‹ä¸€è¡Œçš„æ³¨é‡Š
    # - reverse_lookup_translator

  engine/filters:
    - simplifier@emoji_suggestion
    - simplifier@symbol_suggestion
    # è§£é™¤ä¸‹ä¸€è¡Œæ³¨é‡Šå¯ç”¨æ¨¡ç³ŠéŸ³çŸ«æ­£ï¼ˆåé¢è¿˜æœ‰ï¼‰
    # - lua_filter@fuzz_fix
    - lua_filter@emoji_lookup
    - simplifier
    - uniquifier

  switches/+:
    - name: emoji_suggestion
      reset: 1
      states: [ğŸ–¤, ğŸ’™]
    - name: symbol_suggestion
      reset: 1
      states: [âœ—, âœ“]
    # ä½¿ç”¨åŒæ–‡è¾“å…¥æ³•æ—¶è§£é™¤ä¸‹é¢çš„æ³¨é‡Šå¯ç”¨æŒ‰é”®
    # - options: [ _keyboard_number ]
    #   states: [ ğŸ”¢ ]
    # - options: [ _liquid_keyboard ]
    #   states: [ ğŸ”£ ]
    # - options: [ _keyboard_edit ]
    #   states: [ â— ]
    # - options: [ _key_Hide ]
    #   states: [ â–¼ ]

  # ä¸­æ–‡åˆ°emoji
  emoji_suggestion:
    opencc_config: emoji.json
    option_name: emoji_suggestion
    tips: none

  # ä¸­æ–‡åˆ°ç¬¦å·
  symbol_suggestion:
    opencc_config: symbol.json
    option_name: symbol_suggestion
    tips: none
  
  # è‹±æ–‡åˆ°emoji
  engine/segmentors/@after 2: affix_segmentor@emoji_lookup
  recognizer/patterns/emoji_lookup: "^`[a-z]*$"
  emoji_lookup:
    tag: emoji_lookup
    prefix: "`"
    tips: "[emoji]"
    dictionary: emoji
    enable_sentence: false

  # æ‹†å­—
  recognizer/patterns/reverse_lookup: "^u[a-z]*$"
  simplifier/excluded_types: [reverse_lookup]
  reverse_lookup:
    dictionary: chaizi
    prefix: "u"
    tips: "[æ‹†]"
    preedit_format:
      - xform/([nl])v/$1Ã¼/
    comment_format:
      - xform/([nl])v/$1Ã¼/
  
  # è§£é™¤ä¸‹é¢çš„æ³¨é‡Šå¯ç”¨æ¨¡ç³ŠéŸ³çŸ«æ­£
  # translator/spelling_hints: 9
  # translator/comment_format:
  #   - "xform/([nl])v/$1Ã¼/"
  #   - "xform/([nl])ue/$1Ã¼e/"
  #   - "xform/([jqxy])v/$1u/"

  # ä¸­è‹±æ··è¾“
  recognizer/patterns/uppercase: ""
  speller/alphabet: 'zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA'
  easy_en:
    dictionary: easy_en
    comment_format:
      - xform/^.+$//
    enable_completion: false
    enable_sentence: false
    initial_quality: -1
